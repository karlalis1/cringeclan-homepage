<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CringeClan - Exklusivbereich</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root {
            --primary: #8ab4f8;
            --background: #202124;
            --card-bg: #303134;
            --text: #e8eaed;
            --border: #5f6368;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: var(--background);
            color: var(--text);
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .auth-card, .content-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .hidden {
            display: none;
        }
        
        h1 {
            color: var(--primary);
        }
        
        #g_id_onload {
            margin: 20px auto;
        }
        
        #secret-content {
            font-style: italic;
            color: #f28b82;
            font-size: 1.2em;
            margin-top: 30px;
            padding: 20px;
            border-left: 3px solid var(--primary);
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CringeClan Exklusivbereich</h1>
        
        <div id="auth-section" class="auth-card">
            <h2>Anmeldung erforderlich</h2>
            <p>Bitte mit Google-Konto anmelden:</p>
            <div id="g_id_onload"
                 data-client_id="YOUR_GOOGLE_CLIENT_ID"
                 data-context="signin"
                 data-ux_mode="popup"
                 data-callback="handleGoogleSignIn"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-shape="rectangular"
                 data-theme="dark"
                 data-text="signin_with"
                 data-size="large"
                 data-logo_alignment="left">
            </div>
        </div>
        
        <div id="content-section" class="content-card hidden">
            <h2>Willkommen, <span id="user-name"></span>!</h2>
            <p>Deine E-Mail: <span id="user-email"></span></p>
            
            <div id="whitelist-content" class="hidden">
                <h3>ðŸ”’ Exklusiver Inhalt</h3>
                <div id="secret-content">
                    <p>"Ich starte meine Karriere als DJ... (absolute Katastrophe)"</p>
                    <p>Weitere geheime Clan-Infos kommen hier hin...</p>
                </div>
            </div>
            
            <div id="no-access">
                <p>Du hast keinen Zugriff auf die exklusiven Inhalte.</p>
            </div>
            
            <button id="signout-btn" style="margin-top: 20px;">Abmelden</button>
        </div>
    </div>

    <script>
        // Whitelist der erlaubten E-Mails
        const WHITELISTED_ACCOUNTS = [
            "deine-email@gmail.com",  // Hier deine E-Mail eintragen
            "admin@cringeclan.de",
            "mitglied@example.com"
        ];
        
        function handleGoogleSignIn(response) {
            // User-Daten decodieren
            const userData = decodeJWT(response.credential);
            
            document.getElementById("user-name").textContent = userData.name;
            document.getElementById("user-email").textContent = userData.email;
            
            // Whitelist prÃ¼fen
            const hasAccess = WHITELISTED_ACCOUNTS.includes(userData.email);
            
            // UI anpassen
            document.getElementById("auth-section").classList.add("hidden");
            document.getElementById("content-section").classList.remove("hidden");
            
            if (hasAccess) {
                document.getElementById("whitelist-content").classList.remove("hidden");
                document.getElementById("no-access").classList.add("hidden");
            } else {
                document.getElementById("whitelist-content").classList.add("hidden");
                document.getElementById("no-access").classList.remove("hidden");
            }
        }
        
        function decodeJWT(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            
            return JSON.parse(jsonPayload);
        }
        
        document.getElementById("signout-btn").addEventListener("click", () => {
            // Einfache Logout-Funktion
            document.getElementById("auth-section").classList.remove("hidden");
            document.getElementById("content-section").classList.add("hidden");
            
            // In einer echten App wÃ¼rden wir hier Google-Auth aufrufen
            console.log("User hat sich abgemeldet");
        });
    </script>
</body>
</html>
